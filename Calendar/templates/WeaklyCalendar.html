{% load staticfiles %}

<!DOCTYPE <!DOCTYPE html>
<html>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="{% static "css/bootstrap.min.css" %}">

<!-- Optional theme -->
<link rel="stylesheet" href="{% static "css/bootstrap-theme.min.css" %}">

<!-- Latest compiled and minified JavaScript -->
<script src="{% static "js/jquery.min.js" %}"></script>
<script src="{% static "js/moment.min.js" %}"></script>
<script src="{% static "js/bootstrap.min.js" %}"></script>

<link rel="stylesheet" href="{% static "css/bootstrap-datetimepicker.min.css" %}">

<script src="{% static "js/bootstrap-datetimepicker.min.js" %}"></script>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Calendar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="{% static "css/main.css" %}" />
</head>
<body>
<div class="row">
    <div class="row" align="center">
        <div class="col-md-12">
            <strong>{{year}}</strong>
        </div>
    </div>
    {% load filters %}
    <div class="table-responsive" align="center">
        <div class="col-md-12">
            <table id="calendar" class="table">
                <tr>
                    <th></th>
                    {% for day in week %}
                    <th>{{day}}</th>
                    {% endfor %}
                </tr>
                <tr>
                    <th>1. Saat</th>
                    <td>adasd dasdadasj</td>
                    <td>2. Gün</td>
                    <td>3. Gün</td>
                    <td> <a id="birinci">4. Gün</a> <a id="ikinci">4. Gün</a> </td>
                    <td>5. Gün</td>
                    <td>6. Gün</td>
                    <td id="Çok işler var"></td>
                </tr>
                {% for i in range24 %}
                <tr> 
                    <th>{{i}}:00</th>
                    {% for j in range7 %}
                        {# id is time-day for example 8-17 it means 17th day of month and time is 8 #}
                        <td id={{i}}-{{week|lookup:j|slice:"0:2"}}></td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</div>

<!-- Modal -->
<div id="etkinlik" class="modal fade" role="dialog">
    <div class="modal-dialog">
    
        <!-- Modal content-->
        <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Etkinlik</h4>
        </div>
        <div class="modal-body">
            <form>
            <div class="row">      
                    <div class="col-md-6">
                        <label for="baslik">Başlık</label>
            </div> 
            <div class="form-group col-md-6">
                <input type="text" class="form-control" id="baslik" placeholder="Başlık Giriniz">
            </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <label for="datepicker">Tarih</label>
                </div>
                <div class="input-group date col-md-6" id="datepicker">
                <input type="text" class="form-control" id="tarih" placeholder="Tarih">
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-calendar"></span>
                </span>
                </div>
            </div>
            <div class="row">      
                <div class="col-md-6">
                    <label for="timepicker-start">Başlangıç Saati</label>
                </div>        
                <div class="input-group date col-md-6" id="timepicker-start">
                    <input type='text' id="bas-saat" class="form-control" placeholder="Başlangıç Saati" />
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-time"></span>
                    </span>
                </div>   
            </div>
            <div class="row">      
                    <div class="col-md-6">
                        <label for="timepicker-end">Bitiş Saati</label>
                    </div> 
            <div class="input-group date col-md-6" id="timepicker-end">
                <input type='text' id="bit-saat" class="form-control" placeholder="Bitiş Saati" />
                <span class="input-group-addon">
                    <span class="glyphicon glyphicon-time"></span>
                </span>
            </div> 
            </div>  
            <div class="row">      
                    <div class="col-md-6">
                        <label for="periyot">Tekrar Sıklığı</label>
                    </div> 
            <div class="form-group col-md-6">
                <select class="form-control" id="periyot">
                    <option>Gün</option>
                    <option>Hafta</option>
                    <option>Ay</option>
                    <option>Yıl</option>
                </select>
            </div>
            </div>
            <div class="row">      
                    <div class="col-md-6">
                        <label for="tekrar">Tekrar Sayısı</label>
                    </div> 
            <div class="form-group col-md-6">
                <input type="number" min=1 max=20 class="form-control" id="tekrar" placeholder="1">
            </div>  
            </div>
            <div class="row">      
                    <div class="col-md-6">
                        <label for="konum">Konum</label>
                    </div> 
            <div class="form-group col-md-6">
                <input type="text" class="form-control" id="konum" placeholder="Konum">
            </div>   
            </div>
            <div class="row">      
                    <div class="col-md-6">
                        <label for="renk">Renk</label>
                    </div> 
            <div class="form-group col-md-6">
                <input type="text" class="form-control" id="renk" placeholder="Renk">
            </div>                        
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="ozel">
                <label class="form-check-label" for="ozel<">Özel Mi?</label>
            </div>
            <div class="form-group">
                <label for="aciklama">Açıklama</label>
                <textarea class="form-control" id="aciklama" rows="2"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Onayla</button>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Sil</button>
        </div>
        </div>
    </div>
</div>
</body>

<script type="text/javascript">
    String.prototype.format = function() {
        var str = this;
        for (var i = 0; i < arguments.length; i++) {       
          var reg = new RegExp("\\{" + i + "\\}", "gm");             
          str = str.replace(reg, arguments[i]);
        }
        return str;
      };

    data = {{ activities | safe }};
    console.log(data);
    for(i=0;i<data.length;i++){
        console.log(data[i].date);
        for(j=parseInt(data[i].start_time);j<=parseInt(data[i].finish_time);j++){
            var str = "<a id={0}>{1}</a>".format(data[i].id, data[i].title)
            $("#"+j+"-"+data[i].date).append(str);
        };
    };
</script>
<script src="{% static "js/main.js" %}"></script>

</html>